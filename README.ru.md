# DiskUsage

**Languages:** [English](README.md) | [Русский](README.ru.md)

Нативное приложение для macOS для анализа использования дискового пространства, написанное на SwiftUI.

Задумано как лёгкое и приватное решение: сканирование выполняется локально на вашем Mac.

## Возможности

- **Два режима визуализации:**
  - Tree view — иерархический список с раскрываемыми папками
  - Sunburst view — круговая диаграмма (в стиле DaisyDisk)
- **Панель диска** — показывает общий/занятый/свободный объём с цветным индикатором
- **Варианты сканирования:**
  - Домашняя папка
  - Весь диск (`/`)
  - Выбранная пользователем папка
- **Операции с файлами:**
  - Показать в Finder
  - Скопировать путь
  - Переместить в корзину (с пересчётом размеров)
- **Настройки:**
  - Режим отображения по умолчанию
  - Язык (Системный/English/Russian)
  - Подтверждение перед удалением
  - Показ скрытых файлов
- **Полная локализация:** английский и русский

## Требования

- macOS 14.0+
- Xcode 15+

## Приватность и разрешения

DiskUsage не требует аккаунта.

Для сканирования защищённых разделов (например, части системного тома при выборе `/`)
macOS может запросить дополнительные разрешения.

Если приложение не видит ожидаемые размеры, включите **Full Disk Access** в:

System Settings → Privacy & Security → Full Disk Access

## Установка и запуск

1. Откройте `DiskUsage.xcodeproj` в Xcode
2. Соберите и запустите проект
3. При необходимости выдайте Full Disk Access (см. **Приватность и разрешения**)

## Файлы проекта

```
DiskUsageApp.swift         — точка входа приложения
ContentView.swift          — основной контейнер UI
TreeView.swift             — визуализация дерева
SunburstView.swift         — круговая визуализация
DiskScanner.swift          — сканер файловой системы
DiskScannerViewModel.swift — управление состоянием
FolderUsage.swift          — модель данных
Settings.swift             — модель настроек приложения
SettingsView.swift          — экран настроек
Utilities.swift            — форматирование и утилиты
Localizable.xcstrings      — локализация
DiskUsage.entitlements     — entitlement’ы приложения
```

## Известные проблемы

- Наведение в Sunburst требует доработки при переходе между уровнями колец

## Roadmap

- Объединить дублирующееся контекстное меню.
- Упростить сортировку и обновление дерева.
- Выделить единый объект состояния сканирования.
- Разгрузить `DiskScanner.scan` от управления состоянием прогресса.
- Избавиться от ручного накопления размеров в `Node.addFile`.

## Contributing

Issues и pull request’ы приветствуются.

Рекомендации:

- Делайте изменения максимально сфокусированными и хорошо описанными.
- Для правок UI добавляйте краткое описание или скриншот в PR.
- Для крупных рефакторингов можно сначала открыть issue.

## Поддержка

Сейчас приложение доступно только в виде исходного кода и локальных сборок.

Я собираю средства на подписку Apple Developer Program (99 USD/год), чтобы:

- выпускать подписанные и нотарифицированные сборки, которые корректно запускаются на любом Mac;
- опубликовать DiskUsage в Mac App Store;
- обеспечить автоматические обновления и более простой способ установки.

Поддержать проект можно так:

- поставить звезду этому репозиторию;
- открыть issue с фидбеком или баг-репортом;
- прислать pull request с улучшениями;
- посмотреть мой профиль GitHub или описание репозитория — возможно, там есть ссылки
  на донаты/поддержку, если хотите помочь финансово.

Любой фидбек и вклад в развитие проекта очень ценны.

## Лицензия

Проект распространяется по лицензии **PolyForm Noncommercial 1.0.0**.

Вы можете использовать, копировать, изменять и распространять этот код
**только в некоммерческих целях**.

**Коммерческое использование запрещено** без отдельного соглашения.
Если вы хотите использовать DiskUsage (или части кода) в коммерческом продукте,
сервисе или внутреннем инструменте компании, свяжитесь со мной для получения
коммерческой лицензии.

Полный текст см. в файле `LICENSE`.
